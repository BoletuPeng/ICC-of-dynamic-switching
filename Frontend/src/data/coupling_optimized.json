{
  "id": "coupling_optimized",
  "name": "MTD Coupling",
  "description": "Compute Multiplication of Temporal Derivatives (MTD) for time-resolved functional connectivity",
  "category": "connectivity",
  "color": "#3b82f6",
  "icon": "activity",
  "inputs": [
    {
      "id": "data",
      "name": "Time Series Data",
      "type": "ndarray",
      "dtype": "float64",
      "shape": ["n_rois", "n_timepoints"],
      "description": "ROI time series data [ROIS × TIME]"
    }
  ],
  "outputs": [
    {
      "id": "mtd",
      "name": "MTD Connectivity",
      "type": "ndarray",
      "dtype": "float64",
      "shape": ["n_rois", "n_rois", "n_mtd_timepoints"],
      "description": "Time-varying connectivity matrix [ROIS × ROIS × MTD_TIME]. MTD_TIME = n_timepoints - window - 1 when trimmed"
    }
  ],
  "parameters": [
    {
      "id": "window",
      "name": "Window Size",
      "type": "int",
      "default": 14,
      "min": 3,
      "max": 50,
      "description": "Smoothing window size for moving average (in TRs)",
      "affectsShape": true
    },
    {
      "id": "direction",
      "name": "Window Direction",
      "type": "select",
      "options": [
        {"value": 0, "label": "Middle (centered)"},
        {"value": 1, "label": "Forward facing"}
      ],
      "default": 0,
      "description": "Direction of the smoothing window"
    },
    {
      "id": "trim",
      "name": "Trim Zeros",
      "type": "select",
      "options": [
        {"value": 0, "label": "No trim"},
        {"value": 1, "label": "Trim ends"}
      ],
      "default": 0,
      "description": "Whether to trim zero-padded ends"
    },
    {
      "id": "parallel",
      "name": "Parallel Processing",
      "type": "boolean",
      "default": true,
      "description": "Enable parallel computation"
    }
  ],
  "shapeNotes": "When trim=1, output n_mtd_timepoints = n_timepoints - window - 1"
}
