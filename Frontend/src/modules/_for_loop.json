{
  "id": "for_loop",
  "name": "For Loop",
  "description": "Iterate over outer dimensions, processing each slice independently. Unpacks the first N dimensions, passing the remaining shape to the loop body.",
  "category": "control",
  "color": "#6366f1",
  "icon": "repeat",
  "isControlFlow": true,
  "controlFlowType": "for",

  "inputs": [
    {
      "id": "data_in",
      "name": "Data Input",
      "type": "ndarray",
      "dtype": "any",
      "shape": ["..."],
      "description": "Input data with dimensions to iterate over. The first N dimensions will be stripped for loop iteration."
    }
  ],

  "outputs": [
    {
      "id": "loop_body",
      "name": "Loop Body",
      "type": "ndarray",
      "dtype": "any",
      "shape": ["..."],
      "description": "Single slice for processing. Shape equals input shape minus the first N iterated dimensions."
    },
    {
      "id": "loop_id_ref",
      "name": "Loop Id Ref",
      "type": "loop_ref",
      "dtype": "ref",
      "shape": [],
      "description": "Reference carrying the stripped dimension information. Connect to Stack to restore the original shape structure."
    }
  ],

  "parameters": [
    {
      "id": "n_iterate_dims",
      "name": "Iterate Dimensions",
      "type": "int",
      "default": 1,
      "min": 1,
      "max": 4,
      "description": "Number of outer dimensions to iterate over (strip from input)",
      "affectsShape": true
    }
  ]
}
